// For format details, see https://aka.ms/devcontainer.json. For config options, see the
// README at: https://github.com/devcontainers/templates/tree/main/src/docker-existing-dockerfile
{
	"name": "DBT Project",
	// Sets the run context to one level up instead of the .devcontainer folder
	"context": "..",
	// Update the 'dockerFile' property if you aren't using the standard 'Dockerfile' filename
	"dockerFile": "../Dockerfile",
	
	// Environment variables and run arguments
	"runArgs": ["--env-file", ".env"],
	"containerEnv": {
		"DBT_PROFILES_DIR": "/app/dbt_project/"
	},
	
	// VSCode customizations and extensions
	"customizations": {
		"vscode": {
			"extensions": [
				"sourcegraph.cody-ai",
				"donjayamanne.python-extension-pack",
				"bastienboutonnet.vscode-dbt",
				"henriblancke.vscode-dbt-formatter",
				"foldager.dbt-shortcuts",
				"dorzey.vscode-dbt-language",
				"ms-azuretools.vscode-docker",
				"ms-toolsai.jupyter",
				"wholroyd.jinja",
				"esbenp.prettier-vscode",
				"samuelcolvin.jinjahtml",
				"innoverio.vscode-dbt-power-user",
				"ms-python.black-formatter"
			]
		}
	},
	
	// Workspace configuration
	"workspaceMount": "source=${localWorkspaceFolder},target=/app,type=bind",
	"workspaceFolder": "/app",
	
	// Connect as non-root user
	"remoteUser": "dbtuser"
}